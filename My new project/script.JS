// --- MENÃš HAMBURGUESA ---
const hamburger = document.getElementById('hamburger');
const navLinks = document.querySelector('.nav-links');

hamburger.addEventListener('click', () => {
  navLinks.classList.toggle('active');
});

// --- FILTROS CON BOTONES ---
const botones = document.querySelectorAll(".filtros button");
const items = document.querySelectorAll(".look");

botones.forEach(boton => {
  boton.addEventListener("click", () => {
    botones.forEach(b => b.classList.remove("filtro-activo"));
    boton.classList.add("filtro-activo");

    const categoria = boton.dataset.categoria;

    items.forEach(item => {
      item.style.display = (categoria === "todos" || item.classList.contains(categoria)) ? "block" : "none";
    });
  });
});

// --- FILTRO CON SELECT ---
document.getElementById("filtro").addEventListener("change", function () {
  const valor = this.value;
  document.querySelectorAll(".look").forEach(look => {
    look.style.display = (valor === "todo" || look.classList.contains(valor)) ? "block" : "none";
  });
});

// --- SCROLL HEADER/VIDEO ---
const hero = document.querySelector('.video-hero');
const header = document.querySelector('.site-header');
let lastScrollTop = 0;

window.addEventListener('scroll', () => {
  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

  if (scrollTop > 150 && scrollTop > lastScrollTop) {
    hero.classList.add('hidden');
    header.classList.remove('hidden');
  } else if (scrollTop < lastScrollTop) {
    hero.classList.remove('hidden');
    header.classList.add('hidden');
  }

  lastScrollTop = Math.max(0, scrollTop);
});

// --- FRASE DEL DÃA, LOOK DESTACADO Y HISTORIA ---
const frases = [
  "â€œLa moda pasa, el estilo permanece.â€ â€” Coco Chanel",
  "â€œVÃ­stete como si fueras a conocer a tu peor enemigo hoy.â€",
  "â€œTu estilo deberÃ­a contar quiÃ©n eres, sin tener que hablar.â€"
];
const historia = [
  "ðŸ•°ï¸ En 1947, Dior presentÃ³ el 'New Look', revolucionando la moda femenina.",
  "ðŸ§¥ En los 80s, el power suit se volviÃ³ sÃ­mbolo del empoderamiento femenino.",
  "ðŸ‘— En los 60s, Mary Quant popularizÃ³ la minifalda."
];
const looks = [
  "Look monocromÃ¡tico en tonos neutros",
  "Conjunto denim total",
  "Estilo boho con falda maxi",
  "Minimalismo elegante con blazer oversize"
];

document.getElementById("frase-del-dia").textContent = frases[Math.floor(Math.random() * frases.length)];
document.getElementById("historia-hoy").textContent = historia[Math.floor(Math.random() * historia.length)];
document.getElementById("look-dia").textContent = looks[Math.floor(Math.random() * looks.length)];

// --- TEMPORADA ACTUAL ---
const temporada = document.getElementById("temporada");
const mes = new Date().getMonth();

if (mes >= 2 && mes <= 4) {
  temporada.textContent = "ðŸŒ¸ Primavera: descubre colores pasteles y texturas livianas";
} else if (mes >= 5 && mes <= 7) {
  temporada.textContent = "â˜€ï¸ Verano: tops frescos y lino en tendencia";
} else if (mes >= 8 && mes <= 10) {
  temporada.textContent = "ðŸ‚ OtoÃ±o: tonos tierra, capas y botas";
} else {
  temporada.textContent = "â„ï¸ Invierno: abrigos estructurados y texturas cÃ¡lidas";
}

// --- MODALES ---
function abrirModal(id) {
  const modal = document.getElementById(id);
  modal.style.display = 'block';
}

function cerrarModal(id) {
  const modal = document.getElementById(id);
  modal.style.display = 'none';

  const video = modal.querySelector('video');
  if (video) video.pause();
}

// Cerrar modal al hacer clic fuera del contenido
window.onclick = function (event) {
  document.querySelectorAll('.modal').forEach(modal => {
    if (event.target === modal) {
      modal.style.display = "none";
      const video = modal.querySelector('video');
      if (video) video.pause();
    }
  });
};
const input = document.getElementById('lunabot-input');
const send = document.getElementById('lunabot-send');
const chat = document.getElementById('lunabot-chat');

function appendMessage(role, message) {
  const div = document.createElement('div');
  div.innerHTML = `<strong>${role === 'user' ? 'TÃº' : 'LunaBot'}:</strong> ${message}`;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

send.addEventListener('click', async () => {
  const question = input.value.trim();
  if (!question) return;
  appendMessage('user', question);
  input.value = '';

  // --- SimulaciÃ³n (reemplazar con llamada a la API de OpenAI) ---
  appendMessage('assistant', 'Estoy pensando en el outfit perfecto para ti... ðŸ‘—');
  // --- FIN simulaciÃ³n ---

  // --- Para producciÃ³n, usa algo como esto ---
  /*
  const response = await fetch('', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Bearer TU_API_KEY'
    },
    body: JSON.stringify({
      model: 'gpt-4',
      messages: [
        { role: 'system', content: 'Eres LunaBot, una experta en moda que da consejos sobre outfits y datos histÃ³ricos de moda. Hablas con elegancia y precisiÃ³n.' },
        { role: 'user', content: question }
      ]
    })
  });
  const data = await response.json();
  const answer = data.choices[0].message.content;
  appendMessage('assistant', answer);
  */
});
window.addEventListener("DOMContentLoaded", () => {
    const popup = document.getElementById("popup-bienvenida");
    popup.classList.add("mostrar");
  
    setTimeout(() => {
      popup.classList.remove("mostrar");
    }, 5000);
  });
  